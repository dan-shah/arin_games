<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sight Word Ninja</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            overflow: hidden;
        }

        .back-btn {
            position: fixed;
            top: 10px;
            left: 10px;
            width: 40px;
            height: 40px;
            background: rgba(0,0,0,0.6);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 20px;
            z-index: 9999;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: rgba(0,0,0,0.8);
            border-color: rgba(255,255,255,0.6);
            transform: scale(1.1);
        }

        /* Start Screen */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .start-screen.hidden {
            display: none;
        }

        .title {
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 20px #e94560, 0 0 40px #e94560;
            margin-bottom: 20px;
        }

        .ninja-logo {
            font-size: 8rem;
            margin-bottom: 30px;
            animation: ninjaFloat 2s ease-in-out infinite;
        }

        @keyframes ninjaFloat {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .instructions {
            color: #fff;
            font-size: 1.3rem;
            text-align: center;
            max-width: 500px;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .instructions span {
            color: #e94560;
            font-weight: bold;
        }

        .start-btn {
            padding: 20px 60px;
            font-size: 2rem;
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.4);
            transition: all 0.3s;
        }

        .start-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(233, 69, 96, 0.6);
        }

        /* Game Area */
        .game-container {
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* HUD */
        .hud {
            position: fixed;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        .hud-item {
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .hud-item span {
            color: #e94560;
            font-weight: bold;
        }

        /* Target Word Display */
        .target-display {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 40px;
            border-radius: 20px;
            border: 3px solid #e94560;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .target-label {
            color: #aaa;
            font-size: 1rem;
        }

        .target-word {
            color: #fff;
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 0 0 10px #e94560;
        }

        .speak-btn {
            background: #e94560;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.2s;
        }

        .speak-btn:hover {
            transform: scale(1.1);
            background: #ff6b6b;
        }

        /* Word Bubbles */
        .word-bubble {
            position: absolute;
            padding: 15px 30px;
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.1s;
            animation: float 3s ease-in-out infinite;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .word-bubble:hover {
            transform: scale(1.1);
        }

        .word-bubble.bubble-red {
            background: linear-gradient(135deg, #e94560, #ff6b6b);
        }

        .word-bubble.bubble-blue {
            background: linear-gradient(135deg, #3498db, #5dade2);
        }

        .word-bubble.bubble-green {
            background: linear-gradient(135deg, #27ae60, #58d68d);
        }

        .word-bubble.bubble-purple {
            background: linear-gradient(135deg, #9b59b6, #bb8fce);
        }

        .word-bubble.bubble-orange {
            background: linear-gradient(135deg, #e67e22, #f5b041);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Slash Effect */
        .slash-effect {
            position: fixed;
            pointer-events: none;
            z-index: 200;
        }

        .slash-correct {
            font-size: 4rem;
            animation: slashPop 0.5s ease-out forwards;
        }

        .slash-wrong {
            font-size: 3rem;
            animation: slashShake 0.5s ease-out forwards;
        }

        @keyframes slashPop {
            0% { transform: scale(0) rotate(-45deg); opacity: 1; }
            50% { transform: scale(1.5) rotate(0deg); opacity: 1; }
            100% { transform: scale(1) rotate(15deg); opacity: 0; }
        }

        @keyframes slashShake {
            0%, 100% { transform: translateX(0); opacity: 1; }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); opacity: 0.5; }
            100% { opacity: 0; }
        }

        /* Stars background */
        .star {
            position: fixed;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Level Complete */
        .level-complete {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 500;
        }

        .level-complete.hidden {
            display: none;
        }

        .level-complete h2 {
            font-size: 3rem;
            color: #e94560;
            margin-bottom: 20px;
        }

        .level-complete p {
            color: #fff;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .stars-earned {
            font-size: 4rem;
            margin: 20px 0;
        }

        .next-btn {
            margin-top: 30px;
            padding: 15px 50px;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #27ae60, #58d68d);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.4);
        }

        /* Mastered Words Panel */
        .mastered-panel {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 25px;
            border-radius: 20px;
            color: white;
            font-size: 0.9rem;
            max-width: 90%;
            text-align: center;
        }

        .mastered-panel span {
            color: #58d68d;
        }

        /* Lives display */
        .lives {
            display: flex;
            gap: 5px;
        }

        .life {
            font-size: 1.5rem;
        }

        .life.lost {
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn" title="Back to Games">üè†</a>

    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <div class="ninja-logo">ü•∑</div>
        <h1 class="title">Sight Word Ninja</h1>
        <p class="instructions">
            Listen to the word, then <span>slash</span> the matching bubble!<br><br>
            Click üîä to hear the word again.<br>
            Be quick - don't let bubbles escape!
        </p>
        <button class="start-btn" onclick="startGame()">Start Training!</button>
    </div>

    <!-- Game Container -->
    <div class="game-container" id="gameContainer">
        <!-- HUD -->
        <div class="hud">
            <div class="hud-item">Level: <span id="levelDisplay">1</span></div>
            <div class="hud-item">Score: <span id="scoreDisplay">0</span></div>
            <div class="hud-item">
                <div class="lives" id="livesDisplay"></div>
            </div>
        </div>

        <!-- Target Word -->
        <div class="target-display">
            <span class="target-label">Find:</span>
            <span class="target-word" id="targetWord">---</span>
            <button class="speak-btn" onclick="speakCurrentWord()">üîä</button>
        </div>

        <!-- Bubbles appear here -->
        <div id="bubbleArea"></div>

        <!-- Mastered words -->
        <div class="mastered-panel">
            Words Mastered: <span id="masteredCount">0</span>
        </div>
    </div>

    <!-- Level Complete -->
    <div class="level-complete hidden" id="levelComplete">
        <h2>üéâ Level Complete!</h2>
        <p>You mastered <span id="wordsLearned">0</span> words!</p>
        <div class="stars-earned" id="starsEarned">‚≠ê‚≠ê‚≠ê</div>
        <p id="levelMessage"></p>
        <button class="next-btn" onclick="nextLevel()">Next Level</button>
    </div>

    <script>
        // Sight words organized by difficulty
        const sightWords = {
            1: ['the', 'and', 'a', 'to', 'is', 'it', 'in', 'you', 'he', 'she',
                'was', 'for', 'on', 'are', 'with', 'his', 'they', 'at', 'be', 'this'],
            2: ['have', 'from', 'one', 'had', 'by', 'but', 'not', 'what', 'all', 'were',
                'when', 'your', 'can', 'said', 'there', 'each', 'which', 'do', 'how', 'their'],
            3: ['will', 'way', 'about', 'many', 'then', 'them', 'would', 'like', 'these', 'her',
                'make', 'him', 'into', 'has', 'look', 'more', 'come', 'could', 'now', 'than'],
            4: ['first', 'water', 'been', 'call', 'who', 'find', 'long', 'down', 'day', 'did',
                'get', 'made', 'may', 'part', 'over', 'such', 'new', 'sound', 'only', 'little'],
            5: ['work', 'know', 'place', 'year', 'live', 'give', 'most', 'very', 'after', 'thing',
                'our', 'just', 'name', 'good', 'think', 'say', 'great', 'where', 'help', 'through']
        };

        const bubbleColors = ['bubble-red', 'bubble-blue', 'bubble-green', 'bubble-purple', 'bubble-orange'];

        let currentLevel = 1;
        let score = 0;
        let lives = 3;
        let currentTargetWord = '';
        let wordsInLevel = [];
        let masteredWords = new Set();
        let wordsCorrectThisLevel = 0;
        let activeBubbles = [];
        let gameActive = false;
        let bubbleInterval;

        // Create stars background
        function createStars() {
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(star);
            }
        }

        // Text to speech
        function speak(word) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.rate = 0.8;
                utterance.pitch = 1.1;
                speechSynthesis.speak(utterance);
            }
        }

        function speakCurrentWord() {
            speak(currentTargetWord);
        }

        // Start game
        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            currentLevel = 1;
            score = 0;
            lives = 3;
            masteredWords.clear();
            updateHUD();
            startLevel();
        }

        // Start a level
        function startLevel() {
            gameActive = true;
            wordsInLevel = [...sightWords[currentLevel]];
            wordsCorrectThisLevel = 0;
            lives = 3;
            updateHUD();

            // Clear any existing bubbles
            clearBubbles();

            // Start spawning bubbles
            nextWord();
            bubbleInterval = setInterval(spawnBubbles, 3000);
        }

        // Pick next target word
        function nextWord() {
            if (wordsInLevel.length === 0 || wordsCorrectThisLevel >= 10) {
                levelComplete();
                return;
            }

            const randomIndex = Math.floor(Math.random() * wordsInLevel.length);
            currentTargetWord = wordsInLevel[randomIndex];
            document.getElementById('targetWord').textContent = currentTargetWord;

            // Speak the word
            setTimeout(() => speak(currentTargetWord), 300);

            // Spawn initial bubbles
            spawnBubbles();
        }

        // Spawn bubbles
        function spawnBubbles() {
            if (!gameActive) return;

            // Remove old bubbles that went off screen
            activeBubbles = activeBubbles.filter(b => {
                if (b.element && b.element.parentNode) {
                    const rect = b.element.getBoundingClientRect();
                    if (rect.right < 0) {
                        b.element.remove();
                        return false;
                    }
                }
                return b.element && b.element.parentNode;
            });

            // Create 3-5 bubbles
            const numBubbles = Math.floor(Math.random() * 3) + 3;
            const words = getRandomWords(numBubbles);

            // Make sure target word is included
            if (!words.includes(currentTargetWord)) {
                words[Math.floor(Math.random() * words.length)] = currentTargetWord;
            }

            const bubbleArea = document.getElementById('bubbleArea');
            const areaHeight = window.innerHeight;

            words.forEach((word, i) => {
                const bubble = document.createElement('div');
                bubble.className = `word-bubble ${bubbleColors[Math.floor(Math.random() * bubbleColors.length)]}`;
                bubble.textContent = word;
                bubble.dataset.word = word;

                // Position on right side, different heights
                const startX = window.innerWidth + 50;
                const startY = 180 + (i * (areaHeight - 300) / numBubbles) + Math.random() * 50;

                bubble.style.left = startX + 'px';
                bubble.style.top = startY + 'px';

                // Random speed based on level
                const speed = 1 + Math.random() * 0.5 + (currentLevel * 0.2);

                bubble.onclick = () => slashBubble(bubble, word);

                bubbleArea.appendChild(bubble);
                activeBubbles.push({ element: bubble, speed: speed });
            });
        }

        // Get random words including some distractors
        function getRandomWords(count) {
            const allWords = [];
            for (let lvl = 1; lvl <= Math.min(currentLevel + 1, 5); lvl++) {
                allWords.push(...sightWords[lvl]);
            }

            const shuffled = allWords.sort(() => Math.random() - 0.5);
            return shuffled.slice(0, count);
        }

        // Move bubbles
        function moveBubbles() {
            activeBubbles.forEach(b => {
                if (b.element && b.element.parentNode) {
                    const currentX = parseFloat(b.element.style.left);
                    b.element.style.left = (currentX - b.speed) + 'px';
                }
            });
        }

        // Slash a bubble
        function slashBubble(bubble, word) {
            if (!gameActive) return;

            const rect = bubble.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            if (word === currentTargetWord) {
                // Correct!
                showSlashEffect(centerX, centerY, true);
                score += 10 * currentLevel;
                wordsCorrectThisLevel++;
                masteredWords.add(word);

                // Remove word from level pool
                const idx = wordsInLevel.indexOf(word);
                if (idx > -1) wordsInLevel.splice(idx, 1);

                updateHUD();

                // Remove bubble
                bubble.remove();

                // Next word after short delay
                setTimeout(nextWord, 500);
            } else {
                // Wrong!
                showSlashEffect(centerX, centerY, false);
                lives--;
                updateHUD();

                if (lives <= 0) {
                    gameOver();
                }
            }
        }

        // Show slash effect
        function showSlashEffect(x, y, correct) {
            const effect = document.createElement('div');
            effect.className = `slash-effect ${correct ? 'slash-correct' : 'slash-wrong'}`;
            effect.textContent = correct ? '‚öîÔ∏è' : '‚ùå';
            effect.style.left = x + 'px';
            effect.style.top = y + 'px';
            document.body.appendChild(effect);

            setTimeout(() => effect.remove(), 600);
        }

        // Clear all bubbles
        function clearBubbles() {
            const bubbleArea = document.getElementById('bubbleArea');
            bubbleArea.innerHTML = '';
            activeBubbles = [];
        }

        // Update HUD
        function updateHUD() {
            document.getElementById('levelDisplay').textContent = currentLevel;
            document.getElementById('scoreDisplay').textContent = score;
            document.getElementById('masteredCount').textContent = masteredWords.size;

            const livesDisplay = document.getElementById('livesDisplay');
            livesDisplay.innerHTML = '';
            for (let i = 0; i < 3; i++) {
                const life = document.createElement('span');
                life.className = `life ${i >= lives ? 'lost' : ''}`;
                life.textContent = '‚ù§Ô∏è';
                livesDisplay.appendChild(life);
            }
        }

        // Level complete
        function levelComplete() {
            gameActive = false;
            clearInterval(bubbleInterval);
            clearBubbles();

            const panel = document.getElementById('levelComplete');
            document.getElementById('wordsLearned').textContent = wordsCorrectThisLevel;

            // Stars based on lives remaining
            const stars = '‚≠ê'.repeat(Math.max(1, lives));
            document.getElementById('starsEarned').textContent = stars;

            let message = '';
            if (lives === 3) message = 'Perfect! You\'re a true ninja!';
            else if (lives === 2) message = 'Great job, ninja!';
            else message = 'Keep practicing, young ninja!';
            document.getElementById('levelMessage').textContent = message;

            // Change button text for last level
            const nextBtn = panel.querySelector('.next-btn');
            if (currentLevel >= 5) {
                nextBtn.textContent = 'Play Again!';
            } else {
                nextBtn.textContent = 'Next Level';
            }

            panel.classList.remove('hidden');
        }

        // Next level
        function nextLevel() {
            document.getElementById('levelComplete').classList.add('hidden');

            if (currentLevel >= 5) {
                currentLevel = 1;
                score = 0;
                masteredWords.clear();
            } else {
                currentLevel++;
            }

            startLevel();
        }

        // Game over
        function gameOver() {
            gameActive = false;
            clearInterval(bubbleInterval);
            clearBubbles();

            const panel = document.getElementById('levelComplete');
            panel.querySelector('h2').textContent = 'üíî Game Over';
            document.getElementById('wordsLearned').textContent = wordsCorrectThisLevel;
            document.getElementById('starsEarned').textContent = 'ü•∑';
            document.getElementById('levelMessage').textContent = 'Keep training, young ninja! Try again!';
            panel.querySelector('.next-btn').textContent = 'Try Again';

            panel.classList.remove('hidden');
        }

        // Game loop
        function gameLoop() {
            if (gameActive) {
                moveBubbles();
            }
            requestAnimationFrame(gameLoop);
        }

        // Initialize
        createStars();
        gameLoop();
    </script>
</body>
</html>
