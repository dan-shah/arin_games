<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pattern Planet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(180deg, #0a0a2e 0%, #1a1a4e 50%, #2a1a5e 100%);
            min-height: 100vh;
            overflow: hidden;
        }

        .back-btn {
            position: fixed;
            top: 10px;
            left: 10px;
            width: 40px;
            height: 40px;
            background: rgba(0,0,0,0.6);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 20px;
            z-index: 9999;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: rgba(0,0,0,0.8);
            border-color: rgba(255,255,255,0.6);
            transform: scale(1.1);
        }

        /* Stars */
        .star {
            position: fixed;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Start Screen */
        .start-screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .start-screen.hidden { display: none; }

        .title {
            font-size: 3.5rem;
            color: #fff;
            text-shadow: 0 0 30px #a855f7, 0 0 60px #a855f7;
            margin-bottom: 10px;
        }

        .planet-logo {
            font-size: 6rem;
            margin-bottom: 20px;
            animation: planetFloat 3s ease-in-out infinite;
        }

        @keyframes planetFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        .start-box {
            background: rgba(168, 85, 247, 0.2);
            border: 3px solid #a855f7;
            border-radius: 25px;
            padding: 30px;
            max-width: 500px;
            text-align: center;
        }

        .start-box p {
            color: #e0e0ff;
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .start-box span {
            color: #a855f7;
            font-weight: bold;
        }

        .start-btn {
            padding: 18px 50px;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(168, 85, 247, 0.6);
        }

        /* Game Area */
        .game-container {
            padding: 15px;
            max-width: 800px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* HUD */
        .hud {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: rgba(168, 85, 247, 0.2);
            border-radius: 15px;
            margin-bottom: 15px;
            margin-left: 50px;
            border: 2px solid rgba(168, 85, 247, 0.5);
        }

        .hud-item {
            color: white;
            font-size: 1.1rem;
        }

        .hud-item span {
            color: #a855f7;
            font-weight: bold;
        }

        .planet-name {
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
        }

        /* Alien Message */
        .alien-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            border: 3px solid rgba(168, 85, 247, 0.5);
        }

        .alien {
            font-size: 5rem;
            margin-bottom: 10px;
            animation: alienBounce 1s ease-in-out infinite;
        }

        @keyframes alienBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .alien-speech {
            background: white;
            border-radius: 20px;
            padding: 15px 25px;
            position: relative;
            display: inline-block;
            max-width: 90%;
        }

        .alien-speech::after {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 15px 15px 15px;
            border-style: solid;
            border-color: transparent transparent white transparent;
        }

        .alien-speech p {
            color: #333;
            font-size: 1.2rem;
        }

        /* Pattern Display */
        .pattern-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .pattern-label {
            color: #a855f7;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .pattern-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .pattern-item {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border: 4px solid #ddd;
            transition: all 0.3s;
        }

        .pattern-item.mystery {
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            border-color: #7c3aed;
            color: white;
            font-size: 2rem;
            animation: mysteryPulse 1s ease-in-out infinite;
        }

        @keyframes mysteryPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 rgba(168, 85, 247, 0); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(168, 85, 247, 0.5); }
        }

        /* Choices */
        .choices-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .choices-label {
            color: white;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .choices-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .choice-btn {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border: 4px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
        }

        .choice-btn:hover {
            transform: translateY(-5px) scale(1.1);
            border-color: #a855f7;
            box-shadow: 0 10px 25px rgba(168, 85, 247, 0.4);
        }

        .choice-btn.correct {
            background: #22c55e;
            border-color: #16a34a;
            animation: correctPop 0.5s ease-out;
        }

        .choice-btn.wrong {
            background: #ef4444;
            border-color: #dc2626;
            animation: wrongShake 0.5s ease-out;
        }

        @keyframes correctPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }

        /* Progress */
        .progress-section {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .progress-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s;
        }

        .progress-dot.complete {
            background: #22c55e;
            border-color: #16a34a;
        }

        .progress-dot.current {
            background: #a855f7;
            border-color: #7c3aed;
            animation: currentPulse 1s ease-in-out infinite;
        }

        @keyframes currentPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Level Complete */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 500;
        }

        .overlay.hidden { display: none; }

        .overlay-box {
            background: linear-gradient(135deg, #1a1a4e, #2a1a5e);
            border: 4px solid #a855f7;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            max-width: 450px;
        }

        .overlay-icon {
            font-size: 5rem;
            margin-bottom: 15px;
        }

        .overlay-title {
            font-size: 2.5rem;
            color: #a855f7;
            margin-bottom: 15px;
        }

        .overlay-text {
            color: #e0e0ff;
            font-size: 1.2rem;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .overlay-stars {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .overlay-btn {
            padding: 15px 45px;
            font-size: 1.3rem;
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .overlay-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.5);
        }

        /* Shape styling */
        .shape {
            width: 40px;
            height: 40px;
            display: inline-block;
        }

        .shape.circle {
            border-radius: 50%;
        }

        .shape.square {
            border-radius: 5px;
        }

        .shape.triangle {
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 35px solid;
            background: transparent !important;
        }

        .shape.star {
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }

        .shape.heart {
            clip-path: polygon(50% 100%, 0% 35%, 25% 0%, 50% 20%, 75% 0%, 100% 35%);
        }

        .shape.diamond {
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn" title="Back to Games">üè†</a>

    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <h1 class="title">Pattern Planet</h1>
        <div class="planet-logo">ü™ê</div>
        <div class="start-box">
            <p>
                Aliens from different planets need your help!<br><br>
                They speak in <span>patterns</span> - complete the sequence to decode their messages!
            </p>
            <button class="start-btn" onclick="startGame()">Blast Off! üöÄ</button>
        </div>
    </div>

    <!-- Game -->
    <div class="game-container">
        <div class="hud">
            <div class="hud-item planet-name" id="planetName">Planet Numero</div>
            <div class="hud-item">Pattern: <span id="patternNum">1</span>/5</div>
            <div class="hud-item">Score: <span id="score">0</span></div>
        </div>

        <!-- Progress -->
        <div class="progress-section" id="progress"></div>

        <!-- Alien -->
        <div class="alien-section">
            <div class="alien" id="alien">üëΩ</div>
            <div class="alien-speech">
                <p id="alienMessage">Complete my pattern to decode my message!</p>
            </div>
        </div>

        <!-- Pattern -->
        <div class="pattern-section">
            <div class="pattern-label">üîÆ What comes next?</div>
            <div class="pattern-row" id="patternRow"></div>
        </div>

        <!-- Choices -->
        <div class="choices-section">
            <div class="choices-label">üëÜ Pick the answer:</div>
            <div class="choices-row" id="choicesRow"></div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay hidden" id="overlay">
        <div class="overlay-box">
            <div class="overlay-icon" id="overlayIcon">üéâ</div>
            <h2 class="overlay-title" id="overlayTitle">Planet Complete!</h2>
            <p class="overlay-text" id="overlayText">You decoded all the alien messages!</p>
            <div class="overlay-stars" id="overlayStars">‚≠ê‚≠ê‚≠ê</div>
            <button class="overlay-btn" onclick="nextPlanet()">Next Planet!</button>
        </div>
    </div>

    <script>
        // Planet configurations
        const planets = [
            {
                name: "Planet Numero",
                alien: "üëΩ",
                color: "#22c55e",
                type: "numbers",
                message: "I speak in numbers! What comes next?",
                generatePattern: () => {
                    const patterns = [
                        { seq: [1, 2, 3, 4], answer: 5, choices: [5, 6, 4, 7] },
                        { seq: [2, 4, 6, 8], answer: 10, choices: [10, 9, 12, 8] },
                        { seq: [5, 10, 15, 20], answer: 25, choices: [25, 30, 22, 24] },
                        { seq: [1, 3, 5, 7], answer: 9, choices: [9, 8, 10, 11] },
                        { seq: [10, 9, 8, 7], answer: 6, choices: [6, 5, 7, 4] },
                        { seq: [3, 6, 9, 12], answer: 15, choices: [15, 14, 16, 18] },
                        { seq: [1, 2, 4, 8], answer: 16, choices: [16, 10, 12, 14] },
                        { seq: [100, 90, 80, 70], answer: 60, choices: [60, 65, 50, 55] },
                    ];
                    return patterns[Math.floor(Math.random() * patterns.length)];
                }
            },
            {
                name: "Planet Colora",
                alien: "üëæ",
                color: "#ef4444",
                type: "colors",
                message: "Colors are my language! Find the pattern!",
                generatePattern: () => {
                    const colorSets = [
                        { colors: ['üî¥', 'üîµ', 'üî¥', 'üîµ'], answer: 'üî¥', choices: ['üî¥', 'üîµ', 'üü¢', 'üü°'] },
                        { colors: ['üü°', 'üü°', 'üîµ', 'üü°', 'üü°', 'üîµ'], answer: 'üü°', choices: ['üü°', 'üîµ', 'üî¥', 'üü¢'] },
                        { colors: ['üî¥', 'üü°', 'üîµ', 'üî¥', 'üü°', 'üîµ'], answer: 'üî¥', choices: ['üî¥', 'üü°', 'üîµ', 'üü¢'] },
                        { colors: ['üü¢', 'üü¢', 'üî¥', 'üü¢', 'üü¢', 'üî¥'], answer: 'üü¢', choices: ['üü¢', 'üî¥', 'üîµ', 'üü°'] },
                        { colors: ['üü£', 'üîµ', 'üü£', 'üîµ'], answer: 'üü£', choices: ['üü£', 'üîµ', 'üî¥', 'üü¢'] },
                        { colors: ['üü†', 'üü†', 'üü°', 'üü†', 'üü†', 'üü°'], answer: 'üü†', choices: ['üü†', 'üü°', 'üî¥', 'üü¢'] },
                    ];
                    const set = colorSets[Math.floor(Math.random() * colorSets.length)];
                    return { seq: set.colors, answer: set.answer, choices: set.choices };
                }
            },
            {
                name: "Planet Forma",
                alien: "üõ∏",
                color: "#3b82f6",
                type: "shapes",
                message: "Shapes tell my story! Complete it!",
                generatePattern: () => {
                    const shapeSets = [
                        { shapes: ['‚≠ê', '‚¨ü', '‚≠ê', '‚¨ü'], answer: '‚≠ê', choices: ['‚≠ê', '‚¨ü', '‚óè', '‚ñ†'] },
                        { shapes: ['‚óè', '‚óè', '‚ñ†', '‚óè', '‚óè', '‚ñ†'], answer: '‚óè', choices: ['‚óè', '‚ñ†', '‚ñ≤', '‚≠ê'] },
                        { shapes: ['‚ñ≤', '‚ñ†', '‚óè', '‚ñ≤', '‚ñ†', '‚óè'], answer: '‚ñ≤', choices: ['‚ñ≤', '‚ñ†', '‚óè', '‚≠ê'] },
                        { shapes: ['‚ô¶', '‚ô¶', '‚ô•', '‚ô¶', '‚ô¶', '‚ô•'], answer: '‚ô¶', choices: ['‚ô¶', '‚ô•', '‚ô†', '‚ô£'] },
                        { shapes: ['üî∑', 'üî∂', 'üî∑', 'üî∂'], answer: 'üî∑', choices: ['üî∑', 'üî∂', 'üî¥', 'üü¢'] },
                        { shapes: ['‚¨õ', '‚¨ú', '‚¨õ', '‚¨ú'], answer: '‚¨õ', choices: ['‚¨õ', '‚¨ú', 'üî≤', 'üî≥'] },
                    ];
                    const set = shapeSets[Math.floor(Math.random() * shapeSets.length)];
                    return { seq: set.shapes, answer: set.answer, choices: set.choices };
                }
            },
            {
                name: "Planet Emoji",
                alien: "ü§ñ",
                color: "#f59e0b",
                type: "emoji",
                message: "Emoji patterns are fun! What's missing?",
                generatePattern: () => {
                    const emojiSets = [
                        { emojis: ['üåü', 'üåô', 'üåü', 'üåô'], answer: 'üåü', choices: ['üåü', 'üåô', '‚òÄÔ∏è', '‚≠ê'] },
                        { emojis: ['üçé', 'üçä', 'üçé', 'üçä'], answer: 'üçé', choices: ['üçé', 'üçä', 'üçã', 'üçá'] },
                        { emojis: ['üê∂', 'üê±', 'üê∂', 'üê±'], answer: 'üê∂', choices: ['üê∂', 'üê±', 'üê≠', 'üê∞'] },
                        { emojis: ['‚öΩ', 'üèÄ', '‚öΩ', 'üèÄ'], answer: '‚öΩ', choices: ['‚öΩ', 'üèÄ', 'üèà', '‚öæ'] },
                        { emojis: ['üå∏', 'üå∏', 'üå∫', 'üå∏', 'üå∏', 'üå∫'], answer: 'üå∏', choices: ['üå∏', 'üå∫', 'üå∑', 'üåª'] },
                        { emojis: ['üöó', 'üöï', 'üöô', 'üöó', 'üöï', 'üöô'], answer: 'üöó', choices: ['üöó', 'üöï', 'üöô', 'üöå'] },
                    ];
                    const set = emojiSets[Math.floor(Math.random() * emojiSets.length)];
                    return { seq: set.emojis, answer: set.answer, choices: set.choices };
                }
            },
            {
                name: "Planet Mixta",
                alien: "ü¶ë",
                color: "#a855f7",
                type: "mixed",
                message: "Advanced patterns! You're a pattern master!",
                generatePattern: () => {
                    const mixedSets = [
                        { items: ['1Ô∏è‚É£', 'üî¥', '2Ô∏è‚É£', 'üî¥', '3Ô∏è‚É£', 'üî¥'], answer: '4Ô∏è‚É£', choices: ['4Ô∏è‚É£', 'üî¥', '5Ô∏è‚É£', '3Ô∏è‚É£'] },
                        { items: ['üÖ∞Ô∏è', 'üÖ±Ô∏è', 'üÖ∞Ô∏è', 'üÖ±Ô∏è', 'üÖ∞Ô∏è', 'üÖ±Ô∏è'], answer: 'üÖ∞Ô∏è', choices: ['üÖ∞Ô∏è', 'üÖ±Ô∏è', '¬©Ô∏è', '¬ÆÔ∏è'] },
                        { items: ['‚¨ÜÔ∏è', '‚û°Ô∏è', '‚¨áÔ∏è', '‚¨ÖÔ∏è', '‚¨ÜÔ∏è', '‚û°Ô∏è'], answer: '‚¨áÔ∏è', choices: ['‚¨áÔ∏è', '‚¨ÖÔ∏è', '‚¨ÜÔ∏è', '‚û°Ô∏è'] },
                        { items: ['1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£', '1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£'], answer: '1Ô∏è‚É£', choices: ['1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£', '4Ô∏è‚É£'] },
                        { items: ['üî∫', 'üîª', 'üî∫', 'üîª'], answer: 'üî∫', choices: ['üî∫', 'üîª', '‚óÄÔ∏è', '‚ñ∂Ô∏è'] },
                        { items: ['‚ûï', '‚ûñ', '‚ûï', '‚ûñ'], answer: '‚ûï', choices: ['‚ûï', '‚ûñ', '‚úñÔ∏è', '‚ûó'] },
                    ];
                    const set = mixedSets[Math.floor(Math.random() * mixedSets.length)];
                    return { seq: set.items, answer: set.answer, choices: set.choices };
                }
            }
        ];

        // Game state
        let state = {
            planetIndex: 0,
            patternIndex: 0,
            score: 0,
            patternsPerPlanet: 5,
            currentPattern: null,
            answered: false
        };

        // Create stars
        function createStars() {
            for (let i = 0; i < 80; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(star);
            }
        }

        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            state.planetIndex = 0;
            state.patternIndex = 0;
            state.score = 0;
            loadPlanet();
        }

        function loadPlanet() {
            const planet = planets[state.planetIndex];

            document.getElementById('planetName').textContent = planet.name;
            document.getElementById('planetName').style.background = `linear-gradient(135deg, ${planet.color}, ${adjustColor(planet.color, -30)})`;
            document.getElementById('alien').textContent = planet.alien;
            document.getElementById('alienMessage').textContent = planet.message;

            state.patternIndex = 0;
            updateProgress();
            nextPattern();
        }

        function nextPattern() {
            const planet = planets[state.planetIndex];
            state.currentPattern = planet.generatePattern();
            state.answered = false;

            document.getElementById('patternNum').textContent = state.patternIndex + 1;
            document.getElementById('score').textContent = state.score;

            // Render pattern
            const patternRow = document.getElementById('patternRow');
            patternRow.innerHTML = '';

            state.currentPattern.seq.forEach(item => {
                const div = document.createElement('div');
                div.className = 'pattern-item';
                div.textContent = item;
                patternRow.appendChild(div);
            });

            // Add mystery box
            const mystery = document.createElement('div');
            mystery.className = 'pattern-item mystery';
            mystery.textContent = '?';
            mystery.id = 'mysteryBox';
            patternRow.appendChild(mystery);

            // Render choices
            const choicesRow = document.getElementById('choicesRow');
            choicesRow.innerHTML = '';

            // Shuffle choices
            const shuffledChoices = [...state.currentPattern.choices].sort(() => Math.random() - 0.5);

            shuffledChoices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = choice;
                btn.onclick = () => checkAnswer(btn, choice);
                choicesRow.appendChild(btn);
            });

            updateProgress();
        }

        function checkAnswer(btn, choice) {
            if (state.answered) return;
            state.answered = true;

            const correct = choice === state.currentPattern.answer ||
                           choice.toString() === state.currentPattern.answer.toString();

            // Disable all buttons
            document.querySelectorAll('.choice-btn').forEach(b => b.style.pointerEvents = 'none');

            if (correct) {
                btn.classList.add('correct');
                document.getElementById('mysteryBox').textContent = choice;
                document.getElementById('mysteryBox').classList.remove('mystery');
                document.getElementById('mysteryBox').style.background = '#22c55e';
                document.getElementById('mysteryBox').style.borderColor = '#16a34a';

                state.score += 10;
                document.getElementById('score').textContent = state.score;

                state.patternIndex++;

                setTimeout(() => {
                    if (state.patternIndex >= state.patternsPerPlanet) {
                        // Planet complete
                        showPlanetComplete();
                    } else {
                        nextPattern();
                    }
                }, 1000);
            } else {
                btn.classList.add('wrong');

                // Show correct answer
                document.querySelectorAll('.choice-btn').forEach(b => {
                    if (b.textContent === state.currentPattern.answer.toString()) {
                        b.classList.add('correct');
                    }
                });

                setTimeout(() => {
                    nextPattern();
                }, 1500);
            }
        }

        function updateProgress() {
            const progressEl = document.getElementById('progress');
            progressEl.innerHTML = '';

            for (let i = 0; i < state.patternsPerPlanet; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                if (i < state.patternIndex) {
                    dot.classList.add('complete');
                } else if (i === state.patternIndex) {
                    dot.classList.add('current');
                }
                progressEl.appendChild(dot);
            }
        }

        function showPlanetComplete() {
            const planet = planets[state.planetIndex];

            document.getElementById('overlayIcon').textContent = planet.alien;
            document.getElementById('overlayTitle').textContent = `${planet.name} Complete!`;
            document.getElementById('overlayText').textContent = `You decoded all the alien messages! Great pattern skills!`;
            document.getElementById('overlayStars').textContent = '‚≠ê‚≠ê‚≠ê';

            const btn = document.querySelector('.overlay-btn');
            if (state.planetIndex >= planets.length - 1) {
                btn.textContent = 'Play Again!';
            } else {
                btn.textContent = 'Next Planet!';
            }

            document.getElementById('overlay').classList.remove('hidden');
        }

        function nextPlanet() {
            document.getElementById('overlay').classList.add('hidden');

            state.planetIndex++;
            if (state.planetIndex >= planets.length) {
                state.planetIndex = 0;
                state.score = 0;
            }

            loadPlanet();
        }

        function adjustColor(color, amount) {
            // Simple color adjustment
            return color;
        }

        // Initialize
        createStars();
    </script>
</body>
</html>
